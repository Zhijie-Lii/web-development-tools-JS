{"version":3,"sources":["webpack://js-rest-login/./src/services.js","webpack://js-rest-login/webpack/bootstrap","webpack://js-rest-login/webpack/runtime/define property getters","webpack://js-rest-login/webpack/runtime/hasOwnProperty shorthand","webpack://js-rest-login/webpack/runtime/make namespace object","webpack://js-rest-login/./src/web.js"],"names":["checkLoginStatus","fetch","method","Promise","reject","error","then","response","ok","json","updateStatus","err","performLogin","username","headers","Headers","body","JSON","stringify","console","log","callToAddNewTodo","task","prio","done","priority","callToDeleteTodo","index","callToChangeTodoPriority","newPriority","id","usernameEl","document","querySelector","todoListEl","addButtonEl","taskEl","priorityEl","status","sortEle","todoTemp","errMsgs","addLogin","userInfo","showContent","renderTodos","todos","showLogin","addNewTodo","deleteTodo","updateTodoPriority","changeRanking","classList","add","remove","addEventListener","value","setTimeout","Object","values","html","map","todo","join","innerHTML","screenMsgs","e","parseInt","disabled","rankTodos","target","contains","dataset","parentElement","innerText","changedTodo","sort","a","b","sortFlag"],"mappings":"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","file":"web.js","sourcesContent":["export const checkLoginStatus = function() {\n    return fetch('/session', {\n        method: 'GET',\n    })\n    .catch( () => {\n        return Promise.reject( { error: 'network-error'});\n    })\n    .then( response => {\n        if (response.ok) {\n            return response.json();\n        }\n        updateStatus(); // pass in errMsg\n        return response.json().then( err => Promise.reject(err) );\n    });\n};\n\nexport const performLogin = function( username ) {\n    return fetch('/session', {\n        method: 'POST',\n        headers: new Headers({ \n            'content-type': 'application/json',\n        }),\n        body: JSON.stringify( { username: username }),\n\n    })\n    .catch( () => {\n        return Promise.reject( { error: 'network-error'} );\n    })\n    .then( response => {\n        if (response.ok) {\n            console.log(username);\n            return response.json();\n        }\n        console.log('error',username, typeof err);\n        return response.json().then(err => Promise.reject(err) );\n    });\n};\n\nexport const callToAddNewTodo = function( task, prio ) {\n    return fetch('/todo', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json',\n        }),\n        body: JSON.stringify({\n                task: task,\n                done: false,\n                priority: prio,\n        }),\n    })\n    .catch( () => {\n        return Promise.reject( { error: 'network-error' }) \n    })\n    .then( response => {\n        if (response.ok) {\n            return response.json();\n        }\n        return response.json().then(err => Promise.reject(err) );\n    });                          \n};\n\n\nexport const callToDeleteTodo = function(index) {\n    return fetch(`/todo/${index}`, {\n        method: 'DELETE',\n    })\n    .catch( () => {\n        return Promise.reject( { error: 'network-error'} )\n    })\n   .then( response => {\n        if (response.ok) {\n            return response.json();\n        }\n        return response.json().then(err => Promise.reject(err) );\n    });    \n};\n\nexport const callToChangeTodoPriority = function( index, newPriority ) {\n    return fetch(`/todo/${index}`, {\n        method: 'PATCH',\n        headers: new Headers({\n            'content-type': 'application/json',\n        }),\n        body: JSON.stringify({ \n                priority : newPriority,\n                id:index\n        }),\n    })\n    .catch( () => {\n        return Promise.reject( { error: 'network-error'} )\n    })\n   .then( response => {\n        if (response.ok) {\n            return response.json();\n        }\n        return response.json().then(err => Promise.reject(err) );\n    });    \n}\n\n// export const callToUpdate = function() { //pooling every 5 sec\n//     return fetch('./session', {\n//         method: ''\n//     })\n// }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n    checkLoginStatus,\n    performLogin\n} from './services';\n\nimport {\n    callToAddNewTodo, callToChangeTodoPriority, callToDeleteTodo\n} from './services';\n\n\nconst usernameEl = document.querySelector('#todo-app .login input');\nconst todoListEl = document.querySelector('#todo-app .todos');\nconst addButtonEl = document.querySelector('#add-todo .add');\nconst taskEl = document.querySelector('#add-todo .task');\nconst priorityEl = document.querySelector('#add-todo .priority');\nconst status = document.querySelector('#todo-app .status');\nconst sortEle = document.querySelector('#sortBtn');\n\nlet todoTemp = [];\n\nconst errMsgs = { }\n\naddLogin();\n\ncheckLoginStatus()\n.then( (userInfo) => {\n    showContent();\n    renderTodos(userInfo.todos);\n})\n.catch( error => { \n    JSON.stringify(error);\n    showLogin();\n});\n\naddNewTodo();\ndeleteTodo(); \nupdateTodoPriority();\nchangeRanking( );\n\n\nfunction showContent() {\n    document.querySelector('#todo-app .login').classList.add('hidden');\n    document.querySelector('#todo-app .logged-in').classList.remove('hidden');\n    document.querySelector('#add-todo').classList.remove('hidden');\n}\n\nfunction showLogin() {\n    document.querySelector('#todo-app .login').classList.remove('hidden');\n    document.querySelector('#todo-app .logged-in').classList.add('hidden');\n    document.querySelector('#add-todo').classList.add('hidden');\n}\n\nfunction addLogin() {\n    document.querySelector('#todo-app .login button').addEventListener('click', () => {\n        // showLogin();\n        const username = usernameEl.value;\n        performLogin(username)\n        .then( userInfo => {\n            showContent();\n            // let todos = userInfo.todos;\n            renderTodos(userInfo.todos);\n            updateStatus(`logged in as ${username}`); \n            setTimeout( checkLoginStatus, 5000 ); \n        })\n        .catch( err => {\n            usernameEl.value = '';\n            updateStatus( Object.values(err));\n        });\n    });\n}\n\nfunction renderTodos(todos) {\n    todoTemp = todos;\n    const html = todos.map( (todo) => { \n        // console.log(\"In render\", todo, todo.priority);\n        return `\n            <li>\n                <span class=\"delete\" data-index=${todo.id}>X</span>\n                <span class=\"task\" data-index=${todo.id}>${todo.task}</span>\n                <span class=\"colon\">:</span>\n                <button class=\"degrade\" data-index=${todo.id}>-</button>\n                <span class=\"priority\" data-index=${todo.id}>${todo.priority}</span>\n                <button class=\"upgrade\" data-index=${todo.id}>+</button>\n            </li>\n        `;\n    }).join('');\n    todoListEl.innerHTML = html;\n}\n\nfunction updateStatus( screenMsgs ) {\n    status.innerHTML = screenMsgs;\n}\n\nfunction addNewTodo() {\n    addButtonEl.addEventListener('click', (e) => {\n        const task = taskEl.value;\n        const prio = parseInt(priorityEl.value);\n        if (!task || !prio ) {\n            addButtonEl.disabled = false;\n            return;\n        }\n        callToAddNewTodo( task, prio )\n        .then( (todos) => { \n            taskEl.value ='';\n            priorityEl.value ='';\n            todoTemp = todos;\n            rankTodos( );\n            renderTodos( todos );\n            updateStatus(`Successfully add new todo`);\n        })\n        .catch( err => {\n            updateStatus( errMsgs[err.error] || err.error);\n        });\n        \n    })\n}\n\nfunction deleteTodo() {  //minor fix\n    todoListEl.addEventListener('click', (e) => {\n        if (!e.target.classList.contains('delete')) {\n            return;\n        } else {\n            const index = e.target.dataset.index;\n            callToDeleteTodo( index )\n            .then( (todos) => {\n                todoTemp = todos;\n                rankTodos( );\n                renderTodos( todoTemp );\n                updateStatus(`Successfully delete a todo`);\n                \n            })\n            .catch( err => {\n                updateStatus(errMsgs[err.error] || err.error);\n            });\n        }\n    })\n}\n\nfunction updateTodoPriority() {\n    todoListEl.addEventListener('click', (e) => {\n        const index = e.target.dataset.index;\n        let newPriority = parseInt(e.target.parentElement.querySelector(\"#todo-app .priority\").innerText)\n        if (e.target.classList.contains('degrade')) {\n            if ( newPriority > 1) {\n                newPriority = newPriority-1;\n                callToChangeTodoPriority(index, newPriority)\n                .then( (changedTodo) => { \n                    todoTemp.map( (todo,index) => {\n                        if(todo.id === changedTodo[0].id){\n                            todoTemp[index]= changedTodo[0];\n                        }\n                    })\n                    rankTodos( );\n                    renderTodos( todoTemp );\n                    updateStatus(`Degrade a todo`);\n                })\n            }\n        } else if (e.target.classList.contains('upgrade') ) {\n            if ( newPriority < 5) {\n                newPriority = newPriority+1;\n                callToChangeTodoPriority(index, newPriority)\n                .then( (changedTodo) => { \n                    todoTemp.map( (todo,index) => {\n                        if(todo.id === changedTodo[0].id){\n                            todoTemp[index]= changedTodo[0]\n                        }\n                    })\n                    rankTodos(  );\n                    renderTodos( todoTemp );\n                    updateStatus(`Upgrade a todo`);\n                })\n            }\n        } else return; \n    });\n}\n\nfunction rankTodos( ) {\n    todoTemp.sort( (a,b) => {\n        return b.priority-a.priority;\n    })\n}\n\nfunction changeRanking( ) { \n    let sortFlag = true;\n    sortEle.addEventListener(\"click\",()=>{\n        if(sortFlag){\n            todoTemp.sort( (a,b) => {\n                return a.priority-b.priority;\n            })   \n        } else {\n            todoTemp.sort( (a,b) => {\n                return b.priority-a.priority;\n            })   \n        }\n        sortFlag =!sortFlag;\n        renderTodos(todoTemp);\n    })\n}\n"],"sourceRoot":""}